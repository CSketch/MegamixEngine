<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>sprMegaman</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>prtEntity</parentName>
  <maskName>mskMegaman</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited();

faction = 1;
shiftVisible = 2;

despawnRange = -1;

stopOnFlash = 0;

killOverride = false;

dieToSpikes = true;

// co-op variables:
playerID = 0;
costumeID = 0;
fanoutDistance = 0;

// Physics variables
grav = 0.25; // The player's gravity
gravfactor = 1;
gravWater = 0.38 * grav; // The player's gravity in water
gravDir = 1;

jumpSpeed = 4.75 + grav * 2; // Dunno why grav needs to be multiplied by 2, but MM jumps as high as in MM5 when doing so
jumpSpeedWater = 0.1;

// jumpSpeedWater = 4.85 + grav*2;

walkSpeed = 1.3; // walkSpeed = 1.296875;
oilWalk = 0.3;
maxVspeed = 7;

premask = mask_index;
stepSpeed = 1 / 7;
stepFrames = 7;

iceDec = 0.025; // The deceleration on ice when not holding any buttons
iceDecWalk = 0.05; // The deceleration on ice when moving in the opposite direction

slideSpeed = 2.5;
slideFrames = 26;

// climbSpeed = 1.296875; //Official value of MM3
climbSpeed = 1.3;
hitTime = 32; // The amount of frames you experience knockback after getting hit

if (global.sturdyHelmet)
{
    hitTime = 10;
}

// Variables

// Lock certain actions
playerLockLocalInit();
hitLock = false;
climbLock = false;
shootStandStillLock = false;
slideLock = false;
icedLock = false;
slideChargeLock = false;
teleportLock = false;
shockLock = false;

ground = true;
xDir = 0;
yDir = 0;

prevXScale = image_xscale;
isStep = false;
stepTimer = 0;
canMinJump = false;
climbShootXscale = 1;

isShoot = false;
shootTimer = 0;

isSlide = false;
slideTimer = 0;

canHit = false;
isHit = false;

isShocked = false; // had to resort to this ~dracmeister
shockedTime = 0; // for how long?

isCharge = false;
chargeTimer = 0;
initChargeTimer = 0; // The timer for when to start charging after exiting the shooting animation

climbing = false;
climbSpriteTimer = 0;

quickWeaponScrollTimer = 25;

teleporting = false;
showDuringReady = false;
showReady = false;
readyTimer = 0;
teleportTimer = 0;
teleportImg = 0;

playLandSound = true; // Should we play the landing SFX when colliding with a floor? (Disabled on ladders, for example)
blinkTimer = 0; // Timer for MM's blinking animation when standing still
blinkTimerMax = 120;
blinkImage = 0; // 0 for no blinking, 1 for blinking
blinkDuration = 8; // The amount of frames the blinking lasts
drawWeaponIcon = false; // Whether or not we should draw the weapon icon above our head (used when using quick weapon switching)

deathByPit = false; // Did we die by falling in a bottomless pit?
dieToPit = true;
isSolid = 0;
statusObject = noone;
statusSliding = true;
plt = 0;
isFrozen = 0;
freezeTimer = 0;


// vehicle: the instance of a vehicle mega man
// is embarked in.
vehicle = noone;
deathTimer = -1;
global.outlineCol = c_black;
playerPalette();

// Show the READY text
showReady = false; // this is set to true by objGlobalControl.
readyTimer = 0;


// Camera
viewPlayer = 1;

// Animation Initiation
spriteX = 0;
spriteY = 0;
animNameID = 0;
spriteLoopStart = 0;
spriteLoopEnd = 1;
spriteLoopSpeed = 1;
spriteLoopID = 0;
spriteLoopPoint = 0;
for (i = 0; i &lt;= 99; i += 1)
{
    spriteIDX[i] = 0;
    spriteIDY[i] = 0;
}
animSpinOffset = 0;
animSpinTurn = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>playerEndStep();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (!global.frozen &amp;&amp; !frozen)
{
    playerStep(); // General step event code
    
    if (!playerIsLocked(PL_LOCK_PHYSICS))
    {
        event_inherited(); // General prtEntity code
        playerMovement();
    }
    
    // Shooting
    if (instance_exists(statusObject))
    {
        if (statusObject.statusCanShoot)
        {
            playerHandleShoot();
        }
    }
    else
    {
        playerHandleShoot();
    }
    
    // Quick weapon switching
    playerSwitchWeapons();
    
    // Handle the sprites
    playerHandleSprites('Normal');
    
    // Moving from one section to the next, if possible
    playerSwitchSections();
    
    // Recover from mm1 stun
    playerHandleStun();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="21">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (global.difficulty == DIFF_EASY)
{
    global.damage = max(1, global.damage div 2);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="20">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.playerHealth[playerID] = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="19">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>playerGetHit(global.damage);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>playerDraw();
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
